"use strict";!function(e){function a(){return"undefined"!=typeof Storage&&null!==n?!0:new Promise(t)}function t(a,t){e.get("https://twitchemotes.com/api_cache/v2/global.json",function(e){"undefined"!=typeof Storage&&localStorage.setItem("kappa-js",JSON.stringify(e)),a(e)})}var n=localStorage.getItem("kappa-js");null===n?a().then(function(e){window.KappaJS=e}):window.KappaJS=JSON.parse(localStorage.getItem("kappa-js")),e.fn.kappa=function(a){function t(e,a){var t=e.image_id;return['<img src="',KappaJS.template[i.emoteSize].replace("{image_id}",t),'" ',null===i.customClass?"":'class="'+i.customClass+'" ','alt="',a,'">'].join("")}function n(){var e=setInterval(function(){"undefined"!=typeof window.KappaJS&&(o(),clearInterval(e))},500)}function o(){for(var a in KappaJS.emotes)KappaJS.emotes.hasOwnProperty(a)&&e(p).each(function(n,o){e(o).html(e(o).html().replace(new RegExp("\\b"+a+"\\b","g"),t(KappaJS.emotes[a],a)))})}var p=this,i=e.extend({customClass:null,emoteSize:"small"},a);"undefined"==typeof window.KappaJS?n():o()}}(jQuery);